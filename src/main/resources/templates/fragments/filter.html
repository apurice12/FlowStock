<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>

<!-- Category Filter Fragment -->
<div th:fragment="categoryFilter(categories, selectedCategoryId, baseUrl)" class="mb-6 animate-slide-in">
    <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-5">
        <div class="flex items-center gap-4 flex-wrap">
            <div class="flex items-center gap-2 flex-shrink-0">
                <svg class="w-5 h-5 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"/>
                </svg>
                <label class="text-sm font-medium text-slate-700">Filter by Category:</label>
            </div>
            <div class="flex items-center gap-2 flex-wrap">
                <a th:href="@{${baseUrl}(page=0, size=10)}"
                   th:classappend="${selectedCategoryId == null ? 'bg-blue-500 text-white' : 'bg-slate-100 text-slate-700 hover:bg-slate-200'}"
                   class="px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                    All Categories
                </a>
                <a th:each="category : ${categories}"
                   th:href="@{${baseUrl}(categoryId=${category.id}, page=0, size=10)}"
                   th:classappend="${selectedCategoryId != null && selectedCategoryId == category.id ? 'bg-blue-500 text-white' : 'bg-slate-100 text-slate-700 hover:bg-slate-200'}"
                   class="px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                    <span th:text="${category.name}">Category</span>
                    <span class="ml-1 text-xs opacity-75" th:text="'(' + ${category.products != null ? #lists.size(category.products) : 0} + ')'"></span>
                </a>
            </div>
        </div>
    </div>
</div>

</body>
</html>